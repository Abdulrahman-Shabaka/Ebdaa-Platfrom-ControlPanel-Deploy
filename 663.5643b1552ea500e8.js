"use strict";(self.webpackChunkdemo2=self.webpackChunkdemo2||[]).push([[663],{4442:(y,m,l)=>{l.d(m,{bi:()=>A,h:()=>t,zI:()=>v});var c=l(649);const A=[{id:1,nameAr:"\u0635\u0628\u0627\u062d\u064a\u0629",nameEn:"Morning",period:c.pH._1,peridesc:"(2:00 - 8:00)"},{id:2,nameAr:"\u0638\u0647\u064a\u0631\u0629",nameEn:"Noon",period:c.pH._2,peridesc:"(5:00 - 2:00)"},{id:3,nameAr:"\u0645\u0633\u0627\u0626\u064a\u0629",nameEn:"Evening",period:c.pH._3,peridesc:"(10:00 - 5:00)"},{id:4,nameAr:"\u0644\u064a\u0644\u064a\u0629",nameEn:"Night",period:c.pH._4,peridesc:"(8:00 - 10:00)"}],t=[{Id:"1",NameAr:"\u0645\u0633\u062a\u0634\u0641\u0649",NameEn:"Hospital"},{Id:"2",NameAr:"\u0645\u0639\u0645\u0644",NameEn:"Lab"},{Id:"3",NameAr:"\u0635\u064a\u062f\u0644\u064a\u0647",NameEn:"Pharmacy"},{Id:"4",NameAr:"\u0625\u0633\u0639\u0627\u0641 \u0648 \u062a\u0645\u0631\u064a\u0636",NameEn:"Nursing And Ambulance"}],v=[{Id:"1",NameAr:"\u0645\u062f\u064a\u0631 \u062e\u0627\u0631\u0642",NameEn:"SuperAdmin"},{Id:"2",NameAr:"\u0645\u062f\u064a\u0631 \u0627\u0644\u0644\u0646\u0638\u0627\u0645",NameEn:"SystemAdmin"},{Id:"3",NameAr:"\u0645\u0624\u0633\u0633\u0629",NameEn:"Organization"},{Id:"4",NameAr:"\u0645\u0648\u0638\u0641",NameEn:"Staff"},{Id:"5",NameAr:"\u0637\u0628\u064a\u0628",NameEn:"Doctor"},{Id:"6",NameAr:"\u0639\u0645\u064a\u0644",NameEn:"Client"}]},2029:(y,m,l)=>{l.d(m,{n:()=>p});var c=l(649);const p=[{id:1,nameAr:"\u0627\u0644\u0633\u0628\u062a",nameEn:"Saturday",day:c.Jc._1},{id:2,nameAr:"\u0627\u0644\u0623\u062d\u062f",nameEn:"Sunday",day:c.Jc._2},{id:3,nameAr:"\u0627\u0644\u0625\u062b\u0646\u064a\u0646",nameEn:"Monday",day:c.Jc._3},{id:4,nameAr:"\u0627\u0644\u062b\u0644\u0627\u062b\u0627\u0621",nameEn:"Tuesday",day:c.Jc._4},{id:5,nameAr:"\u0627\u0644\u0623\u0631\u0628\u0639\u0627\u0621",nameEn:"Wednesday",day:c.Jc._5},{id:6,nameAr:"\u0627\u0644\u062e\u0645\u064a\u0633",nameEn:"Thursday",day:c.Jc._6},{id:7,nameAr:"\u0627\u0644\u062c\u0645\u0639\u0629",nameEn:"Friday",day:c.Jc._7}]},5663:(y,m,l)=>{l.r(m),l.d(m,{HospitalDoctorClinicAvailabilityModule:()=>J});var c=l(6814),p=l(1356),u=l(7434),A=l(2029),b=l(4442),N=l(1879),t=l(5879),h=l(649),g=l(6223),_=l(2160),v=l(6663);let r=(()=>{class n{transform(e){const i=e.split(":");return`${i[0]}:${i[1]}`}static \u0275fac=function(i){return new(i||n)};static \u0275pipe=t.Yjl({name:"TimeFromateOnlyMinutes",type:n,pure:!0})}return n})();function C(n,d){if(1&n&&(t.TgZ(0,"th",16),t._UZ(1,"br"),t._uU(2),t._UZ(3,"br"),t._uU(4),t.qZA()),2&n){const e=d.$implicit,i=t.oxw();t.xp6(2),t.hij(" ","ar"==i.lang?e.nameAr:e.nameEn," "),t.xp6(2),t.hij(" ",e.peridesc," ")}}function x(n,d){if(1&n&&(t.ynx(0),t.TgZ(1,"span",26),t._uU(2),t.ALo(3,"TimeFromateOnlyMinutes"),t.ALo(4,"TimeFromateOnlyMinutes"),t.qZA(),t.TgZ(5,"span"),t._uU(6," x "),t.qZA(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(2),t.AsE("(",t.lcZ(3,2,e.startAt)," - ",t.lcZ(4,4,e.endAt),")")}}function E(n,d){if(1&n&&(t.TgZ(0,"span",25),t.YNc(1,x,7,6,"ng-container",21),t.TgZ(2,"span"),t._uU(3),t.qZA()()),2&n){const e=d.$implicit;t.xp6(1),t.Q6J("ngIf","00:00:00"!=e.startAt&&"00:00:00"!=e.endAt),t.xp6(2),t.hij(" ",e.doctorName," ")}}function D(n,d){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,E,4,2,"span",24),t.qZA()),2&n){const e=t.oxw().$implicit,i=t.oxw().$implicit,a=t.oxw();t.xp6(1),t.Q6J("ngForOf",a.getAvailabilitiesForPeriod(i.hospitalTable,e.id))}}function I(n,d){1&n&&(t.TgZ(0,"div",27)(1,"span",27),t._uU(2," .. "),t.qZA()())}function H(n,d){if(1&n){const e=t.EpF();t.TgZ(0,"button",28),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit,o=t.oxw().$implicit,s=t.oxw();return t.KtG(s.ShowAddDoctorToClinicAvaliability(o,a.id))}),t._uU(1," + "),t.qZA()}}function T(n,d){if(1&n){const e=t.EpF();t.TgZ(0,"td",20),t.NdJ("mouseenter",function(){const o=t.CHM(e).$implicit,s=t.oxw(2);return s.showButton=!0,t.KtG(s.currentHover1=o)})("mouseleave",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.showButton=!1)}),t.YNc(1,D,2,1,"div",21),t.YNc(2,I,3,0,"div",22),t.YNc(3,H,2,0,"button",23),t.qZA()}if(2&n){const e=d.$implicit,i=t.oxw().$implicit,a=t.oxw();t.xp6(1),t.Q6J("ngIf",a.hasAvailability(i.hospitalTable,e.id)),t.xp6(1),t.Q6J("ngIf",!a.hasAvailability(i.hospitalTable,e.id)),t.xp6(1),t.Q6J("ngIf",a.showButton&&a.currentHover==i&&a.currentHover1==e)}}function Z(n,d){if(1&n){const e=t.EpF();t.TgZ(0,"tr",17),t.NdJ("mouseenter",function(){const o=t.CHM(e).$implicit,s=t.oxw();return s.showButton=!0,t.KtG(s.currentHover=o)})("mouseleave",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.showButton=!1)}),t.TgZ(1,"td",18),t._uU(2),t.qZA(),t.YNc(3,T,4,3,"td",19),t.qZA()}if(2&n){const e=d.$implicit,i=t.oxw();t.xp6(2),t.hij(" ",e.specialityName,""),t.xp6(1),t.Q6J("ngForOf",i.uniquePeriods)}}let M=(()=>{class n{service;cdr;dialogService;Cols;Data;lang=localStorage.getItem("language");days=A.n;currentLanguage;showButton=!1;currentHover={};currentHover1={};periods=b.bi;uniquePeriods=[];selectedDay;constructor(e,i,a){this.service=e,this.cdr=i,this.dialogService=a,this.lang=localStorage.getItem("language"),this.currentLanguage=localStorage.getItem("language")??"ar"}ngOnChanges(e){this.cdr.detectChanges()}currentRole={arabicName:"",englishName:"",roleDescriptionAr:"",roleDescriptionEn:""};ngOnInit(){this.getData()}extractUniquePeriods(){for(const i of this.Data)for(const a of i.hospitalTable)if(!this.uniquePeriods.find(o=>o.period===a.period)){var e=b.bi.find(o=>o.period===a.period);e.peridesc=a.startAt.slice(0,-3)+" ~  "+a.endAt.slice(0,-3),this.uniquePeriods.push(e)}}getData(){this.Data=[],this.cdr.detectChanges();var e=(new u.l).GetUserOrgId();this.service.getHospitalTable(e,A.n[this.selectedDay.id-1].day,(new u.l).GetUserId()).subscribe({next:a=>{this.Data=a.data.hospitalTableResponses,this.extractUniquePeriods(),this.cdr.detectChanges()},error:()=>{}})}hasAvailability(e,i){return e.some(o=>o.period==i&&o.doctorClinicAvailabilities.length>0)}getAvailabilitiesForPeriod(e,i){const a=[];for(const o of e)o.period===i&&a.push(...o.doctorClinicAvailabilities);return a}transformData(e){const a=new Map;return e.forEach(o=>{a.has(o.specialityName)||a.set(o.specialityName,{specialityName:o.specialityName,Periods:Array.from({length:4},(s,f)=>({Period:f+1,doctorClinicAvailabilities:[]}))})}),e.forEach(o=>{a.get(o.specialityName).Periods[o.period-1].doctorClinicAvailabilities.push(...o.doctorClinicAvailabilities)}),Array.from(a.values())}ShowAddDoctorToClinicAvaliability(e,i){console.log(e);var a=e.hospitalTable.filter(s=>s.period==i)[0].clinicAvailabilityId??0;const o=this.dialogService.open(N.t,{data:{clinic:{specialityId:e.specialityId},Availability:{id:a}},header:"ar"==this.lang?"\u0627\u0636\u0627\u0641\u0629 \u0637\u0628\u064a\u0628 \u0644\u0648\u0642\u062a \u0627\u0644\u0639\u064a\u0627\u062f\u0629":"Add Doctor To Clinic Availability",width:"60%",maximizable:!0,resizable:!0,draggable:!0});o.onDestroy.subscribe(s=>{this.getData()}),o.onClose.subscribe(s=>{this.getData()})}static \u0275fac=function(i){return new(i||n)(t.Y36(h.r9),t.Y36(t.sBO),t.Y36(p.xA))};static \u0275cmp=t.Xpm({type:n,selectors:[["app-hopital-doctor-clinic-availability"]],features:[t._Bn([p.xA]),t.TTD],decls:17,vars:7,consts:[["id","kt_timeline_widget_2_card",1,"card","h-xl-100"],[1,"card-header","position-relative","py-0","border-bottom-2"],[1,"card-body"],[1,"row","m-10"],[1,"mb-10"],["translate","org.AvaliableDays",1,"form-label"],[1,"dropdown"],["styleClass","fc-primng",3,"options","ngModel","optionLabel","showClear","placeholder","ngModelChange"],[1,"m-10"],["translate","ECOMMERCE.COMMON.SEARCH",1,"btn","btn-success",3,"click"],[1,"col-md-12"],[1,"table","table-bordered"],[2,"text-align","center"],["translate","org.clinics",1,"b-g1","clinics-radius",2,"text-align","center","vertical-align","middle"],["class","b-g",4,"ngFor","ngForOf"],[3,"mouseenter","mouseleave",4,"ngFor","ngForOf"],[1,"b-g"],[3,"mouseenter","mouseleave"],[1,"b-g",2,"text-align","center","vertical-align","middle"],["class","position-relative",3,"mouseenter","mouseleave",4,"ngFor","ngForOf"],[1,"position-relative",3,"mouseenter","mouseleave"],[4,"ngIf"],["style"," text-align: center; vertical-align: middle;",4,"ngIf"],["class","btn btn-sm   btn-active-color-success bg-active-success","style","position: absolute;background-color: #0080004d; border: 1px solid rgba(144, 255, 144, 0.375);  bottom: 0px;  left: 0px;",3,"click",4,"ngIf"],["class","doctortime",4,"ngFor","ngForOf"],[1,"doctortime"],[2,"color","gray","font-size","12px"],[2,"text-align","center","vertical-align","middle"],[1,"btn","btn-sm","btn-active-color-success","bg-active-success",2,"position","absolute","background-color","#0080004d","border","1px solid rgba(144, 255, 144, 0.375)","bottom","0px","left","0px",3,"click"]],template:function(i,a){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),t._UZ(5,"label",5),t.TgZ(6,"div",6)(7,"p-dropdown",7),t.NdJ("ngModelChange",function(s){return a.selectedDay=s}),t.qZA()(),t.TgZ(8,"div",8)(9,"button",9),t.NdJ("click",function(){return a.getData()}),t.qZA()()(),t.TgZ(10,"div",10)(11,"table",11)(12,"thead",12),t._UZ(13,"th",13),t.YNc(14,C,5,2,"th",14),t.qZA(),t.TgZ(15,"tbody"),t.YNc(16,Z,4,2,"tr",15),t.qZA()()()()()()()),2&i&&(t.xp6(7),t.Q6J("options",a.days)("ngModel",a.selectedDay)("optionLabel","ar"==a.currentLanguage?"nameAr":"nameEn")("showClear",!1)("placeholder","ar"==a.currentLanguage?"\u0625\u062e\u062a\u0631 \u064a\u0648\u0645":"Choose a day"),t.xp6(7),t.Q6J("ngForOf",a.uniquePeriods),t.xp6(2),t.Q6J("ngForOf",a.Data))},dependencies:[c.sg,c.O5,g.JJ,g.On,_.Lt,v.Pi,r],styles:[".b-g[_ngcontent-%COMP%]{background-color:#68c4d0}.b-g1[_ngcontent-%COMP%]{background-color:#36d1e2}.doctortime[_ngcontent-%COMP%]{display:block;background-color:#37d1e269;margin:12px 2px;border-radius:17px;padding:2px 15px;color:#36918d;font-size:15px}"]})}return n})();var O=l(3758),F=l(7304),P=l(3415),S=l(3660),w=l(2427);let J=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=t.oAB({type:n});static \u0275inj=t.cJS({imports:[c.ez,g.u5,P.m,_.kW,F.Bz.forChild([{path:"",canActivate:[w.o,O.a],component:M,data:{animation:"HopitalDoctorClinicAvailabilityComponent"}}]),v.aw,S.q]})}return n})()}}]);