"use strict";(self.webpackChunkdemo2=self.webpackChunkdemo2||[]).push([[663],{5663:(q,v,r)=>{r.r(v),r.d(v,{HospitalDoctorClinicAvailabilityModule:()=>z});var m=r(6814),h=r(5118),p=r(7434),g=r(649),u=r(2029),f=r(4442),T=r(1879),D=r(3519),d=r.n(D),H=r(5448),Z=r(6205),t=r(5879),C=r(7304),_=r(6223),x=r(3965),y=r(6663);let w=(()=>{class a{transform(i){const o=i.split(":");return`${o[0]}:${o[1]}`}static \u0275fac=function(o){return new(o||a)};static \u0275pipe=t.Yjl({name:"TimeFromateOnlyMinutes",type:a,pure:!0})}return a})();function I(a,s){if(1&a&&(t.TgZ(0,"th",18),t._UZ(1,"br"),t._uU(2),t._UZ(3,"br"),t._uU(4),t.qZA()),2&a){const i=s.$implicit,o=t.oxw();t.xp6(2),t.hij(" ","ar"===o.lang?i.nameAr:i.nameEn," "),t.xp6(2),t.hij(" ",i.peridesc," ")}}function N(a,s){if(1&a&&(t.ynx(0),t.TgZ(1,"span",33),t._uU(2),t.ALo(3,"TimeFromateOnlyMinutes"),t.ALo(4,"TimeFromateOnlyMinutes"),t.qZA(),t.TgZ(5,"span"),t._uU(6," - "),t.qZA(),t.BQk()),2&a){const i=t.oxw().$implicit;t.xp6(2),t.AsE("(",t.lcZ(3,2,i.startAt)," - ",t.lcZ(4,4,i.endAt),")")}}function F(a,s){if(1&a){const i=t.EpF();t.TgZ(0,"button",34),t.NdJ("click",function(){t.CHM(i);const e=t.oxw().$implicit,n=t.oxw(4);return t.KtG(n.deleteAvailability(e))}),t._uU(1,"-"),t.qZA()}}function M(a,s){if(1&a&&(t.TgZ(0,"span",33),t._uU(1),t.qZA()),2&a){const i=t.oxw().$implicit;t.xp6(1),t.hij("( ",i.note," )")}}function J(a,s){if(1&a){const i=t.EpF();t.TgZ(0,"i",35),t.NdJ("click",function(){t.CHM(i);const e=t.oxw().$implicit,n=t.oxw(4);return t.KtG(n.setImportant(e,!1))}),t.qZA()}}function U(a,s){if(1&a){const i=t.EpF();t.TgZ(0,"i",36),t.NdJ("click",function(){t.CHM(i);const e=t.oxw().$implicit,n=t.oxw(4);return t.KtG(n.setImportant(e,!0))}),t.qZA()}}function P(a,s){if(1&a){const i=t.EpF();t.TgZ(0,"span",27),t.NdJ("mouseenter",function(){const n=t.CHM(i).$implicit,l=t.oxw(4);return l.showDeleteButton=!0,t.KtG(l.currentHover2=n)})("mouseleave",function(){t.CHM(i);const e=t.oxw(4);return t.KtG(e.showDeleteButton=!1)}),t.TgZ(1,"span",28),t.YNc(2,N,7,6,"ng-container",23),t.YNc(3,F,2,0,"button",29),t.TgZ(4,"span"),t._uU(5),t.qZA(),t.YNc(6,M,2,1,"span",30),t._UZ(7,"span"),t.TgZ(8,"span"),t.YNc(9,J,1,0,"i",31),t.YNc(10,U,1,0,"i",32),t.qZA()()()}if(2&a){const i=s.$implicit,o=t.oxw(4);t.xp6(2),t.Q6J("ngIf","00:00:00"!==i.startAt&&"00:00:00"!==i.endAt),t.xp6(1),t.Q6J("ngIf",o.showDeleteButton&&o.currentHover2===i),t.xp6(2),t.hij(" ",i.doctorName," "),t.xp6(1),t.Q6J("ngIf",i.note),t.xp6(3),t.Q6J("ngIf",!i.isImportant),t.xp6(1),t.Q6J("ngIf",i.isImportant)}}function O(a,s){if(1&a&&(t.TgZ(0,"div"),t.YNc(1,P,11,6,"span",26),t.qZA()),2&a){const i=t.oxw().$implicit,o=t.oxw().$implicit,e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.getAvailabilitiesForPeriod(o.hospitalTable,i.id))}}function B(a,s){1&a&&(t.TgZ(0,"div",37)(1,"span",37),t._uU(2," .. "),t.qZA()())}function $(a,s){if(1&a){const i=t.EpF();t.TgZ(0,"button",38),t.NdJ("click",function(){t.CHM(i);const e=t.oxw().$implicit,n=t.oxw().$implicit,l=t.oxw();return t.KtG(l.ShowAddDoctorToClinicAvaliability(n,e.id))}),t._uU(1," + "),t.qZA()}}function Y(a,s){if(1&a){const i=t.EpF();t.TgZ(0,"td",22),t.NdJ("mouseenter",function(){const n=t.CHM(i).$implicit,l=t.oxw(2);return l.showButton=!0,t.KtG(l.currentHover1=n)})("mouseleave",function(){t.CHM(i);const e=t.oxw(2);return t.KtG(e.showButton=!1)}),t.YNc(1,O,2,1,"div",23),t.YNc(2,B,3,0,"div",24),t.YNc(3,$,2,0,"button",25),t.qZA()}if(2&a){const i=s.$implicit,o=t.oxw().$implicit,e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.hasAvailability(o.hospitalTable,i.id)),t.xp6(1),t.Q6J("ngIf",!e.hasAvailability(o.hospitalTable,i.id)),t.xp6(1),t.Q6J("ngIf",e.showButton&&e.currentHover===o&&e.currentHover1===i)}}function k(a,s){if(1&a){const i=t.EpF();t.TgZ(0,"tr",19),t.NdJ("mouseenter",function(){const n=t.CHM(i).$implicit,l=t.oxw();return l.showButton=!0,t.KtG(l.currentHover=n)})("mouseleave",function(){t.CHM(i);const e=t.oxw();return t.KtG(e.showButton=!1)}),t.TgZ(1,"th",20),t._uU(2),t.qZA(),t.YNc(3,Y,4,3,"td",21),t.qZA()}if(2&a){const i=s.$implicit,o=t.oxw();t.xp6(2),t.hij(" ",i.specialityName," "),t.xp6(1),t.Q6J("ngForOf",o.uniquePeriods)}}let E=(()=>{class a{service;cdr;dialogService;route;Cols;Data;lang=localStorage.getItem("language");days=u.n;currentLanguage;showButton=!1;showDeleteButton=!1;currentHover={};currentHover1={};currentHover2={};periods=f.bi;uniquePeriods=[];selectedDay={id:1,nameAr:"\u0627\u0644\u0633\u0628\u062a",nameEn:"Saturday",day:g.Jc7._1};constructor(i,o,e,n){this.service=i,this.cdr=o,this.dialogService=e,this.route=n,this.lang=localStorage.getItem("language"),this.currentLanguage=localStorage.getItem("language")??"ar"}ngOnChanges(i){this.cdr.detectChanges()}currentRole={arabicName:"",englishName:"",roleDescriptionAr:"",roleDescriptionEn:""};ngOnInit(){this.selectedDay=u.n[0],this.getData(),this.searchHospitalTiming()}extractUniquePeriods(){for(const o of this.Data)for(const e of o.hospitalTable)if(!this.uniquePeriods.find(n=>n.period===e.period)){var i=f.bi.find(n=>n.period===e.period);i.peridesc=e.startAt.slice(0,-3)+" ~  "+e.endAt.slice(0,-3),this.uniquePeriods.push(i)}}getData(){this.Data=[],this.cdr.detectChanges();var i=void 0;this.route.queryParamMap.subscribe(o=>{null==(i=o.get("id"))&&(i=(new p.l).GetUserOrgId()),this.service.getHospitalTable(i,u.n[this.selectedDay.id-1].day,(new p.l).GetUserId(),void 0).subscribe({next:n=>{this.Data=n.data.hospitalTableResponses,this.extractUniquePeriods(),this.cdr.detectChanges()},error:()=>{}})})}hasAvailability(i,o){return i.some(n=>n.period==o&&n.doctorClinicAvailabilities.length>0)}getAvailabilitiesForPeriod(i,o){const e=[];for(const n of i)n.period===o&&e.push(...n.doctorClinicAvailabilities);return e}transformData(i){const e=new Map;return i.forEach(n=>{e.has(n.specialityName)||e.set(n.specialityName,{specialityName:n.specialityName,Periods:Array.from({length:4},(l,c)=>({Period:c+1,doctorClinicAvailabilities:[]}))})}),i.forEach(n=>{e.get(n.specialityName).Periods[n.period-1].doctorClinicAvailabilities.push(...n.doctorClinicAvailabilities)}),Array.from(e.values())}ShowAddDoctorToClinicAvaliability(i,o){var e=i.hospitalTable.filter(n=>n.period==o)[0].clinicAvailabilityId??0;if(0==e){let n=this.timingDataAny.filter(l=>l.period==o)[0].id;this.AddClinicAvailability(i.clinicId,n).subscribe(()=>{this.getData();let l={};d().fire({title:"ar"==this.lang?"\u0628\u062f\u0648\u0646 \u0641\u062a\u0631\u0629":"No period",html:"ar"==this.lang?" \u064a\u0631\u062c\u0649 \u0645\u062d\u0627\u0648\u0644\u0629 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0637\u0628\u064a\u0628 \u0628\u0639\u062f \u0627\u0644\u0627\u0646\u062a\u0647\u0627\u0621 <br/>  <b></b> \u064a\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0641\u062a\u0631\u0629 \u0623\u0648\u0644\u0627. .":"We are adding new Avaliability  <b></b> <br/> Please try adding the doctor after Finished.   ",timer:2e3,timerProgressBar:!0,didOpen:()=>{d().showLoading();const c=d().getPopup().querySelector("b");l=setInterval(()=>{c.textContent=`${d().getTimerLeft()}`},100)},willClose:()=>{clearInterval(l)}}).then(c=>{if(c.dismiss===d().DismissReason.timer){var b=this.Data.filter(A=>A.specialityId==i.specialityId&&A.hospitalTable?.filter(L=>L.period==o)[0].period==o)[0];this.ShowAddDoctorToClinicAvaliability(b,o)}})})}else this.openDoctorToClinicAvailabilityDialog(i,e)}openDoctorToClinicAvailabilityDialog(i,o){const e=this.dialogService.open(T.t,{data:{clinic:{specialityId:i.specialityId},Availability:{id:o}},header:"ar"==this.lang?"\u0627\u0636\u0627\u0641\u0629 \u0637\u0628\u064a\u0628 \u0644\u0648\u0642\u062a \u0627\u0644\u0639\u064a\u0627\u062f\u0629":"Add Doctor To Clinic Availability",width:"60%",maximizable:!0,resizable:!0,draggable:!0,autoZIndex:!0,baseZIndex:9999999999});e.onDestroy.subscribe(n=>{this.getData()}),e.onClose.subscribe(n=>{this.getData()})}timingDataAny;searchHospitalTiming(){let o,i=(new p.l).GetUserId();this.route.queryParamMap.subscribe(e=>{o=e.get("id"),null==o&&(o=(new p.l).GetUserOrgId()),this.service.getHospitalTimings(o,i,void 0).subscribe({next:n=>{var l;l=n.data,this.timingDataAny=[];for(let c=0;c<l.length;c++)this.timingDataAny.push(l[c]);this.cdr.detectChanges()},error:()=>{}})})}AddClinicAvailability(i,o){let e=new g.C6P;return e.clinicId=i,e.days=[],e.days.push(u.n[this.selectedDay.id-1].day),e.hospitalTimingIds=[],e.hospitalTimingIds.push(o),this.service.addClinicAvailability(e)}setImportant(i,o){}deleteAvailability(i){d().fire({title:"ar"==this.lang?"\u0647\u0644 \u0627\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u061f":"Are You Sure ? ",text:"ar"==this.lang?" \u0633\u0648\u0641 \u064a\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0637\u0628\u064a\u0628 \u0645\u0646 \u0647\u0630\u0647 \u0627\u0644\u0641\u062a\u0631\u0629 \u0627\u0630\u0627 \u0643\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0627\u0636\u063a\u0637 \u062d\u0630\u0641  ":"this will delete doctor from this period and hospital timing if you sure click delete ",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"ar"==this.lang?"\u062d\u0630\u0641":"Delete",cancelButtonText:"ar"==this.lang?"\u0625\u0644\u063a\u0627\u0621":"Cancel"}).then(o=>{if(o.isConfirmed){let e=(new p.l).GetUserId();this.service.deleteDoctorClinicAvailability(i.doctorClinicAvailabilityId,e,void 0).subscribe({next:n=>{this.getData(),d().fire({title:"ar"==this.lang?"\u062a\u0645 \u0627\u0644\u062d\u0630\u0641":"Deleted!",text:"ar"==this.lang?"\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0637\u0628\u064a\u0628 \u0628\u0646\u062c\u0627\u062d ":"doctor has been deleted.",icon:"success"})}})}})}AddPeriod(){this.dialogService.open(H.m,{data:{},header:"ar"==this.lang?"\u0627\u0636\u0627\u0641\u0629 \u0641\u062a\u0631\u0629 \u0627\u0644\u0639\u064a\u0627\u062f\u0629":"Add Hospital Timing",width:"80%",maximizable:!0,resizable:!0,draggable:!0,autoZIndex:!0,baseZIndex:9999999999})}AddClinc(){this.dialogService.open(Z.T,{data:{},header:"ar"==this.lang?"\u0627\u0636\u0627\u0641\u0629 \u0639\u064a\u0627\u062f\u0629":"Add Hospital Timing",width:"80%",maximizable:!0,resizable:!0,draggable:!0,autoZIndex:!0,baseZIndex:9999999999})}static \u0275fac=function(o){return new(o||a)(t.Y36(g.r9S),t.Y36(t.sBO),t.Y36(h.xA),t.Y36(C.gz))};static \u0275cmp=t.Xpm({type:a,selectors:[["app-hopital-doctor-clinic-availability"]],features:[t._Bn([h.xA]),t.TTD],decls:23,vars:7,consts:[[1,"m-3"],["translate","MENU.HospitalDoctorClinicAvailability",2,"font-weight","bold","color","white"],["id","kt_timeline_widget_2_card",1,"card"],[1,"card-body"],[1,"row","m-10"],[1,"mb-10"],["translate","org.AvaliableDays",1,"form-label"],[1,"dropdown"],["styleClass","fc-primng",3,"options","ngModel","optionLabel","showClear","placeholder","ngModelChange","onChange"],[1,"col-md-12"],[1,"table","table-bordered"],[2,"text-align","center"],["translate","org.clinics",1,"b-g1","clinics-radius",2,"text-align","center","vertical-align","middle"],["class","b-g",4,"ngFor","ngForOf"],[1,"b-g1","clinics-radius-opp","c-pointer","text-center",2,"vertical-align","middle","height","50px","cursor","pointer",3,"click"],[1,"text-white"],[3,"mouseenter","mouseleave",4,"ngFor","ngForOf"],[1,"b-g1","c-pointer","text-center",2,"vertical-align","middle","height","50px","cursor","pointer","border-radius","0 0  10px 0",3,"click"],[1,"b-g"],[3,"mouseenter","mouseleave"],[1,"b-g",2,"text-align","center","vertical-align","middle"],["class","position-relative",3,"mouseenter","mouseleave",4,"ngFor","ngForOf"],[1,"position-relative",3,"mouseenter","mouseleave"],[4,"ngIf"],["style"," text-align: center; vertical-align: middle;",4,"ngIf"],["class","btn btn-sm   btn-active-color-success bg-active-success","style","position: absolute;background-color: #0080004d; border: 1px solid rgba(144, 255, 144, 0.375);  bottom: 0px;  left: 0px;",3,"click",4,"ngIf"],["class","doctortime",3,"mouseenter","mouseleave",4,"ngFor","ngForOf"],[1,"doctortime",3,"mouseenter","mouseleave"],[2,"display","flex","justify-content","space-between"],["class","btn btn-sm  btn-danger","style","border-radius: 18px;padding: 0px 7px;margin: 1px;",3,"click",4,"ngIf"],["style","color: gray; font-size: 12px;",4,"ngIf"],["class","bi bi-star",3,"click",4,"ngIf"],["class","bi bi-star-filld","style","color: gold;",3,"click",4,"ngIf"],[2,"color","gray","font-size","12px"],[1,"btn","btn-sm","btn-danger",2,"border-radius","18px","padding","0px 7px","margin","1px",3,"click"],[1,"bi","bi-star",3,"click"],[1,"bi","bi-star-filld",2,"color","gold",3,"click"],[2,"text-align","center","vertical-align","middle"],[1,"btn","btn-sm","btn-active-color-success","bg-active-success",2,"position","absolute","background-color","#0080004d","border","1px solid rgba(144, 255, 144, 0.375)","bottom","0px","left","0px",3,"click"]],template:function(o,e){1&o&&(t.TgZ(0,"span",0),t._UZ(1,"h2",1),t.qZA(),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),t._UZ(6,"label",6),t.TgZ(7,"div",7)(8,"p-dropdown",8),t.NdJ("ngModelChange",function(l){return e.selectedDay=l})("onChange",function(){return e.getData()}),t.qZA()()(),t.TgZ(9,"div",9)(10,"table",10)(11,"thead",11),t._UZ(12,"th",12),t.YNc(13,I,5,2,"th",13),t.TgZ(14,"th",14),t.NdJ("click",function(){return e.AddPeriod()}),t.TgZ(15,"b",15),t._uU(16," + "),t.qZA()()(),t.TgZ(17,"tbody"),t.YNc(18,k,4,2,"tr",16),t.TgZ(19,"tr")(20,"td",17),t.NdJ("click",function(){return e.AddClinc()}),t.TgZ(21,"b",15),t._uU(22," + "),t.qZA()()()()()()()()()),2&o&&(t.xp6(8),t.Q6J("options",e.days)("ngModel",e.selectedDay)("optionLabel","ar"===e.currentLanguage?"nameAr":"nameEn")("showClear",!1)("placeholder","ar"===e.currentLanguage?"\u0625\u062e\u062a\u0631 \u064a\u0648\u0645":"Choose a day"),t.xp6(5),t.Q6J("ngForOf",e.uniquePeriods),t.xp6(5),t.Q6J("ngForOf",e.Data))},dependencies:[m.sg,m.O5,_.JJ,_.On,x.Lt,y.Pi,w],styles:[".b-g[_ngcontent-%COMP%]{background-color:#68c4d0}.b-g1[_ngcontent-%COMP%]{background-color:#36d1e2}.doctortime[_ngcontent-%COMP%]{display:block;background-color:#37d1e269;margin:12px 2px;border-radius:17px;padding:2px 15px;color:#36918d;font-size:15px}"]})}return a})();var G=r(8524),S=r(3660),Q=r(2427);let z=(()=>{class a{static \u0275fac=function(o){return new(o||a)};static \u0275mod=t.oAB({type:a});static \u0275inj=t.cJS({imports:[m.ez,_.u5,G.m,x.kW,C.Bz.forChild([{path:"",canActivate:[Q.o],component:E,data:{animation:"HopitalDoctorClinicAvailabilityComponent"}}]),y.aw,S.q]})}return a})()}}]);