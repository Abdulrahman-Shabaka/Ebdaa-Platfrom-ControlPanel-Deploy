"use strict";(self.webpackChunkdemo2=self.webpackChunkdemo2||[]).push([[866],{3866:(Q,m,r)=>{r.r(m),r.d(m,{ManageOrganizationsModule:()=>F});var f=r(6814),T=r(7304),S=r(3415),g=r(6223),C=r(6663),_=r(3660),M=r(2160),u=r(1356),B=r(4055),O=r(9378),Z=r(3506),d=r(7860),l=r(649),b=r(7434),z=r(8180),w=r(4442),U=r(3519),y=r.n(U),e=r(5879),A=r(4361);function J(s,c){if(1&s){const n=e.EpF();e.TgZ(0,"div",12),e._UZ(1,"label",29),e.TgZ(2,"input",18),e.NdJ("ngModelChange",function(t){e.CHM(n);const i=e.oxw();return e.KtG(i.model.aboutUsTitle=t)}),e.qZA()()}if(2&s){const n=e.oxw();e.xp6(2),e.Q6J("ngModel",n.model.aboutUsTitle)}}function N(s,c){if(1&s){const n=e.EpF();e.TgZ(0,"div",12),e._UZ(1,"label",30),e.TgZ(2,"input",18),e.NdJ("ngModelChange",function(t){e.CHM(n);const i=e.oxw();return e.KtG(i.model.aboutUsDetails=t)}),e.qZA()()}if(2&s){const n=e.oxw();e.xp6(2),e.Q6J("ngModel",n.model.aboutUsDetails)}}function E(s,c){if(1&s){const n=e.EpF();e.TgZ(0,"button",31),e.NdJ("click",function(){e.CHM(n);const t=e.oxw();return e.KtG(t.Add())}),e.qZA()}}function D(s,c){if(1&s){const n=e.EpF();e.TgZ(0,"button",32),e.NdJ("click",function(){e.CHM(n);const t=e.oxw();return e.KtG(t.Edit())}),e.qZA()}}let I=(()=>{class s{service;cdr;dialogService;router;CitiesData=[];Cols;Data;UsersData;SpecData;currentLanguage;lang=localStorage.getItem("language");contentFirstBtn;contentSecondBtn;contentThirdBtn;classFirstBtn="success text-white";mode="add";currentSpec={id:""};OrganizationType=w.h;currentOrgType;SelectedUser;ShowSceduleThirdButton=!1;constructor(n,o,t,i){this.service=n,this.cdr=o,this.dialogService=t,this.router=i,this.lang=localStorage.getItem("language"),this.Cols=[d.v.fromJS({id:1,sorted:!0,filtered:!0,hidden:!0,field:"id",header:"ar"==this.lang?"\u0627\u0644\u0643\u0648\u062f \u0627\u0644\u062a\u0639\u0631\u064a\u0641\u064a":"Id Code ",type:"text"}),d.v.fromJS({id:2,sorted:!0,filtered:!0,hidden:!1,field:"organizationName",header:"ar"==this.lang?"\u0627\u0633\u0645 \u0627\u0644\u0645\u0624\u0633\u0633\u0629":"Organization Name ",type:"text"}),d.v.fromJS({id:3,sorted:!0,filtered:!0,hidden:!0,field:"aboutUsTitle",header:"ar"==this.lang?"\u0639\u0646 \u0627\u0644\u0645\u0624\u0633\u0633\u0629":"About Organization ",type:"text"}),d.v.fromJS({id:4,sorted:!0,filtered:!0,hidden:!1,field:"openTime",header:"ar"==this.lang?"\u0648\u0642\u062a \u0627\u0644\u0628\u062f\u0621":"Start Time ",type:"text"}),d.v.fromJS({id:5,sorted:!0,filtered:!0,hidden:!1,field:"closeTime",header:"ar"==this.lang?"\u0648\u0642\u062a \u0627\u0644\u0627\u063a\u0644\u0627\u0642":"Close Time",type:"text"})],this.contentFirstBtn="ar"===this.lang?"<i class='fas fa-trash-alt'></i> \u062d\u0630\u0641":"<i class='fas fa-trash-alt'></i> Delete",this.contentSecondBtn="ar"===this.lang?"<i class='fas fa-edit'></i> \u062a\u0639\u062f\u064a\u0644":"<i class='fas fa-edit'></i> Edit ",this.contentThirdBtn="ar"===this.lang?"<i class='fas fa-calendar-days'></i> \u0627\u0644\u062c\u062f\u0648\u0644":"<i class='fas fa-calendar-days'></i> Schedule "}ngOnChanges(n){this.cdr.detectChanges()}ngOnInit(){this.currentLanguage=localStorage.getItem("language")??"ar",this.searchCities(),this.searchUsers(),this.SearchByType()}searchUsers(){let a,v,n=(new b.l).GetUserId();a=!1,v=void 0,this.service.searchUsers(void 0,void 0,void 0,void 0,!1,void 0,void 0,n,void 0).pipe((0,z.q)(1)).subscribe({next:L=>{this.UsersData=L.data.items,this.cdr.detectChanges()},error:()=>{}})}SearchByType(){let o,i,n=(new b.l).GetUserId();i=!1,o=this.currentOrgType?.Id??this.OrganizationType[0].Id,this.service.getListOfOrganizations(o,void 0,!1,void 0,void 0,n,void 0).subscribe({next:p=>{this.Data=p.data.items,this.setShowHideScheduleButton(),this.cdr.detectChanges()},error:()=>{}})}searchCities(){this.service.searchCity("","",!1,1,1,void 0,void 0).subscribe({next:n=>{this.CitiesData=n.data.items,this.cdr.detectChanges()},error:()=>{}})}Add(){let n=new l.Y1C;n.organizationType=Number(this.currentOrgType.Id),n.targetUserId=this.SelectedUser.id,n.description=this.model.addressDescription,n.openTime=this.model.openTime,n.closeTime=this.model.closeTime,n.cityId=String(this.selectedCity),n.latitude=this.model.latitude,n.longitude=this.model.longitude,this.service.newOrganization(n).subscribe({next:o=>{this.SearchByType()}})}model=new l.dgT;selectedForEdit=new l.dgT;selectedCity;EditRow(n){this.model=n,this.currentOrgType=this.OrganizationType.filter(t=>t.Id==n.organizationType)[0],this.mode="edit";let o=l.dgT.fromJS(n);this.model=o,this.selectedForEdit=n,null!=n.cityId&&(this.selectedCity=this.CitiesData.filter(t=>t.id==n.cityId)[0].id,this.model.cityId=this.selectedCity),null!=n.userId&&(this.SelectedUser=this.UsersData.filter(t=>t.id==n.userId)[0]),this.cdr.detectChanges()}Edit(){let n=new l.OjJ;n.aboutUsDetails=this.model.aboutUsDetails,n.aboutUsTitle=this.model.aboutUsTitle,n.addressDescription=this.model.addressDescription,n.cityId=this.selectedCity,n.closeTime=this.model.closeTime,n.openTime=this.model.openTime,n.latitude=this.model.latitude,n.longitude=this.model.longitude,n.organizationId=this.model.id,n.organizationName=this.model.organizationName,this.service.editOrganization(n).subscribe({next:o=>{this.SearchByType()}})}ShowSchedule(n){window.location.href="#/HospitalDoctorClinicAvailability?id="+n.id}DeleteRow(n){y().fire({title:"ar"==this.lang?"\u0647\u0644 \u0627\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u061f":"Are You Sure ? ",text:"ar"==this.lang?" \u0639\u0645\u0644\u064a\u0629 \u0627\u0644\u062d\u0630\u0641 \u0644\u0627 \u064a\u0645\u0643\u0646 \u0627\u0644\u0631\u062c\u0648\u0639 \u0641\u064a\u0647\u0627 , \u0627\u0630\u0627 \u0643\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0627\u0636\u063a\u0637 \u0639\u0644\u064a \u062d\u0630\u0641 \u0627\u0648 \u064a\u0645\u0643\u0646\u0643 \u0627\u0644\u0631\u062c\u0648\u0639   ":"this The deletion process is irreversible. If you are sure, click Delete or you can Cancel it ",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"ar"==this.lang?"\u062d\u0630\u0641":"Delete",cancelButtonText:"ar"==this.lang?"\u0625\u0644\u063a\u0627\u0621":"Cancel"}).then(o=>{if(o.isConfirmed){let t=new l.rl5;t.targetUserId=n.id,this.service.deleteUser(t).subscribe({next:i=>{this.SearchByType(),y().fire({title:"ar"==this.lang?"\u062a\u0645 \u0627\u0644\u062d\u0630\u0641":"Deleted!",text:"ar"==this.lang?"\u062a\u0645 \u0627\u0644\u062d\u0630\u0641 \u0628\u0646\u062c\u0627\u062d ":"Record has been deleted Successfully.",icon:"success"})}})}})}Clear(){this.model=new l.NME,this.mode="add",this.currentOrgType={}}setShowHideScheduleButton(){let n=this.currentOrgType?.Id??this.OrganizationType[0].Id;this.ShowSceduleThirdButton=!1,this.ShowSceduleThirdButton=1==n}static \u0275fac=function(o){return new(o||s)(e.Y36(l.r9S),e.Y36(e.sBO),e.Y36(u.xA),e.Y36(T.F0))};static \u0275cmp=e.Xpm({type:s,selectors:[["app-ManageOrganizations"]],features:[e._Bn([u.xA]),e.TTD],decls:51,vars:47,consts:[[1,"m-3"],["translate","MENU.Orginzations",2,"font-weight","bold","color","white"],["id","kt_timeline_widget_2_card",1,"card"],[1,"card-body"],[1,"row"],["translate","org.Type",1,"form-label"],[1,"dropdown"],["styleClass","fc-primng",3,"options","ngModel","optionLabel","showClear","placeholder","ngModelChange","onChange"],[1,"col-md-8"],[3,"cols","rowsPageNumbers","pagination","scrollable","data","chooseColomns","SecondBtn","FirstBtn","ThirdBtn","contentThirdBtn","contentSecondBtn","contentFirstBtn","classFirstBtn","classSecondBtn","classThirdBtn","secondButtonEvent","firstButtonEvent","thirdButtonEvent"],[1,"col-md-4"],[1,"col-md-12"],[1,"mb-10"],["styleClass","fc-primng",3,"options","ngModel","optionLabel","showClear","placeholder","ngModelChange"],["translate","org.UserName",1,"form-label"],["styleClass","fc-primng",3,"options","ngModel","filter","filterBy","optionLabel","showClear","placeholder","ngModelChange"],["class","mb-10",4,"ngIf"],["translate","org.AddressDescription",1,"form-label"],["type","text","placeholder","","autocomplete","",1,"form-control",3,"ngModel","ngModelChange"],["translate","org.StartFrom",1,"form-label"],["translate","org.EndAt",1,"form-label"],["translate","address.SelectState",1,"form-label"],["styleClass","fc-primng",3,"options","ngModel","optionValue","optionLabel","showClear","placeholder","ngModelChange"],["translate","Users.longitude",1,"form-label"],["translate","Users.latitude",1,"form-label"],[2,"display","contents"],["style","width: 60%;","class","btn btn-success mx-3","translate","SHARED.Create",3,"click",4,"ngIf"],["style","width: 60%;","class","btn btn-success mx-3","translate","SHARED.Edit",3,"click",4,"ngIf"],["translate","SHARED.Cancel",1,"btn","btn-bordered","btn-outline-success","mx-3",2,"width","25%",3,"click"],["translate","org.About",1,"form-label"],["translate","org.AboutDetails",1,"form-label"],["translate","SHARED.Create",1,"btn","btn-success","mx-3",2,"width","60%",3,"click"],["translate","SHARED.Edit",1,"btn","btn-success","mx-3",2,"width","60%",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"span",0),e._UZ(1,"h2",1),e.qZA(),e.TgZ(2,"div",2)(3,"div",3)(4,"div",4),e._UZ(5,"label",5),e.TgZ(6,"div",6)(7,"p-dropdown",7),e.NdJ("ngModelChange",function(a){return t.currentOrgType=a})("onChange",function(){return t.SearchByType()}),e.qZA()()()()(),e._UZ(8,"br"),e.TgZ(9,"div",4)(10,"div",8)(11,"div",2)(12,"div",3)(13,"app-shared-datatable",9),e.NdJ("secondButtonEvent",function(a){return t.EditRow(a)})("firstButtonEvent",function(a){return t.DeleteRow(a)})("thirdButtonEvent",function(a){return t.ShowSchedule(a)}),e.qZA()()()(),e.TgZ(14,"div",10)(15,"div",2)(16,"div",3)(17,"div",11)(18,"div",12),e._UZ(19,"label",5),e.TgZ(20,"div",6)(21,"p-dropdown",13),e.NdJ("ngModelChange",function(a){return t.currentOrgType=a}),e.qZA()()(),e.TgZ(22,"div",12),e._UZ(23,"label",14),e.TgZ(24,"div",6)(25,"p-dropdown",15),e.NdJ("ngModelChange",function(a){return t.SelectedUser=a}),e.qZA()()(),e.YNc(26,J,3,1,"div",16),e.YNc(27,N,3,1,"div",16),e.TgZ(28,"div",12),e._UZ(29,"label",17),e.TgZ(30,"textarea",18),e.NdJ("ngModelChange",function(a){return t.model.addressDescription=a}),e.qZA()(),e.TgZ(31,"div",12),e._UZ(32,"label",19),e.TgZ(33,"input",18),e.NdJ("ngModelChange",function(a){return t.model.openTime=a}),e.qZA()(),e.TgZ(34,"div",12),e._UZ(35,"label",20),e.TgZ(36,"input",18),e.NdJ("ngModelChange",function(a){return t.model.closeTime=a}),e.qZA()(),e.TgZ(37,"div",12),e._UZ(38,"label",21),e.TgZ(39,"div",6)(40,"p-dropdown",22),e.NdJ("ngModelChange",function(a){return t.selectedCity=a}),e.qZA()()(),e.TgZ(41,"div",12),e._UZ(42,"label",23),e.TgZ(43,"input",18),e.NdJ("ngModelChange",function(a){return t.model.longitude=a}),e.qZA()(),e.TgZ(44,"div",12),e._UZ(45,"label",24),e.TgZ(46,"input",18),e.NdJ("ngModelChange",function(a){return t.model.latitude=a}),e.qZA()(),e.TgZ(47,"div",25),e.YNc(48,E,1,0,"button",26),e.YNc(49,D,1,0,"button",27),e.TgZ(50,"button",28),e.NdJ("click",function(){return t.Clear()}),e.qZA()()()()()()()),2&o&&(e.xp6(7),e.Q6J("options",t.OrganizationType)("ngModel",t.currentOrgType)("optionLabel","ar"==t.currentLanguage?"NameAr":"NameEn")("showClear",!1)("placeholder","ar"==t.currentLanguage?"\u0627\u062e\u062a\u0631 \u0646\u0648\u0639 \u0627\u0644\u0645\u0624\u0633\u0633\u0629":"Choose Organization Type "),e.xp6(6),e.Q6J("cols",t.Cols)("rowsPageNumbers",10)("pagination",!0)("scrollable",!1)("data",t.Data)("chooseColomns",!0)("SecondBtn",!0)("FirstBtn",!0)("ThirdBtn",t.ShowSceduleThirdButton)("contentThirdBtn",t.contentThirdBtn)("contentSecondBtn",t.contentSecondBtn)("contentFirstBtn",t.contentFirstBtn)("classFirstBtn","light-danger")("classSecondBtn","light-warning")("classThirdBtn","light-info"),e.xp6(8),e.Q6J("options",t.OrganizationType)("ngModel",t.currentOrgType)("optionLabel","ar"==t.currentLanguage?"NameAr":"NameEn")("showClear",!1)("placeholder","ar"==t.currentLanguage?"\u0627\u062e\u062a\u0631 \u0646\u0648\u0639 \u0627\u0644\u0645\u0624\u0633\u0633\u0629":"Choose Organization Type "),e.xp6(4),e.Q6J("options",t.UsersData)("ngModel",t.SelectedUser)("filter",!0)("filterBy","fullName")("optionLabel","fullName")("showClear",!1)("placeholder","ar"==t.currentLanguage?"\u0627\u062e\u062a\u0631 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645":"Choose User "),e.xp6(1),e.Q6J("ngIf","edit"==t.mode),e.xp6(1),e.Q6J("ngIf","edit"==t.mode),e.xp6(3),e.Q6J("ngModel",t.model.addressDescription),e.xp6(3),e.Q6J("ngModel",t.model.openTime),e.xp6(3),e.Q6J("ngModel",t.model.closeTime),e.xp6(4),e.Q6J("options",t.CitiesData)("ngModel",t.selectedCity)("optionValue","id")("optionLabel","ar"==t.currentLanguage?"city_Name_Ar":"city_Name_En")("showClear",!1)("placeholder","ar"==t.currentLanguage?"\u0627\u062e\u062a\u0631 \u0627\u0644\u0645\u0646\u0642\u0637\u0629":"Choose Area "),e.xp6(3),e.Q6J("ngModel",t.model.longitude),e.xp6(3),e.Q6J("ngModel",t.model.latitude),e.xp6(2),e.Q6J("ngIf","add"==t.mode),e.xp6(1),e.Q6J("ngIf","edit"==t.mode))},dependencies:[f.O5,A.G,g.Fj,g.JJ,g.On,M.Lt,C.Pi]})}return s})(),F=(()=>{class s{static \u0275fac=function(o){return new(o||s)};static \u0275mod=e.oAB({type:s});static \u0275inj=e.cJS({imports:[f.ez,T.Bz.forChild([{path:"Organizations",component:I,data:{animation:"Organizations"}}]),S.m,g.u5,M.kW,O.EV,B.q4,Z._8,C.aw,_.q,u.DL]})}return s})()}}]);