"use strict";(self.webpackChunkdemo2=self.webpackChunkdemo2||[]).push([[8],{9008:(R,f,a)=>{a.r(f),a.d(f,{ManageUsersModule:()=>D});var v=a(6814),u=a(7860),l=a(649),p=a(1356),b=a(7434),y=a(8180),N=a(4442),e=a(5879),E=a(4361),c=a(6223),T=a(2160),C=a(6663);function B(o,x){if(1&o){const n=e.EpF();e.TgZ(0,"button",18),e.NdJ("click",function(){e.CHM(n);const t=e.oxw();return e.KtG(t.Add())}),e.qZA()}}function S(o,x){if(1&o){const n=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){e.CHM(n);const t=e.oxw();return e.KtG(t.Edit())}),e.qZA()}}let A=(()=>{class o{service;cdr;dialogService;Cols;Data;SpecData;currentLanguage;lang=localStorage.getItem("language");contentFirstBtn;classFirstBtn="success text-white";mode="add";currentSpec={id:""};userTypes=N.zI;currentUserType;constructor(n,s,t){this.service=n,this.cdr=s,this.dialogService=t,this.lang=localStorage.getItem("language"),this.Cols=[u.v.fromJS({id:1,sorted:!0,filtered:!0,hidden:!1,field:"id",header:"ar"==this.lang?"\u0627\u0644\u0643\u0648\u062f \u0627\u0644\u062a\u0639\u0631\u064a\u0641\u064a":"Id Code ",type:"text"}),u.v.fromJS({id:2,sorted:!0,filtered:!0,hidden:!1,field:"fullName",header:"ar"==this.lang?"\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645":"User Name ",type:"text"}),u.v.fromJS({id:3,sorted:!0,filtered:!0,hidden:!1,field:"phoneNumber",header:"ar"==this.lang?"\u0631\u0642\u0645 \u0627\u0644\u0645\u0648\u0628\u0627\u064a\u0644":"Phone Number ",type:"text"}),u.v.fromJS({id:4,sorted:!0,filtered:!0,hidden:!1,field:"userType",header:"ar"==this.lang?"\u0627\u0644\u0646\u0648\u0639":"Type ",type:"userType"})]}ngOnChanges(n){this.cdr.detectChanges()}ngOnInit(){this.search(),this.currentLanguage=localStorage.getItem("language")??"ar"}search(){let n=(new b.l).GetUserId();this.service.searchUsers(void 0,void 0,void 0,void 0,void 0,void 0,n).pipe((0,y.q)(1)).subscribe({next:m=>{this.Data=m.data.items,this.cdr.detectChanges()},error:()=>{}})}Add(){let n=new l.QV;this.service.createNewUser(n).subscribe({next:s=>{this.search()}})}model=new l.NM;selectedForEdit=new l.NM;EditRow(n){this.model=n,this.currentUserType=this.userTypes.filter(t=>t.Id==n.userType)[0],this.mode="edit";let s=l.NM.fromJS(n);this.model=s,this.selectedForEdit=n}Edit(){let n,s,t,d,r,g,i,m,M,h,U,L=(new b.l).GetUserId();n=this.selectedForEdit.id,t=this.selectedForEdit.fullName,h=this.currentUserType.Id,s="",d=1,r=new Date,r.setFullYear(r.getFullYear()-10),g=1,void 0===i&&(i={data:new Blob(["Text"],{type:"application/octet-stream"}),fileName:""}),m=l.Bh._1,M=l.SQ._0,h=1,U=l.$B._1,this.service.editUser(n,"",t,1,r,1,i,m,M,L,1,U).subscribe({next:H=>{this.search()}})}DeleteRow(n){let s=new l.rl;s.targetUserId=n.id,this.service.deleteUser(s).subscribe({next:t=>{this.search()}})}Clear(){this.model=new l.NM,this.mode="add"}static \u0275fac=function(s){return new(s||o)(e.Y36(l.r9),e.Y36(e.sBO),e.Y36(p.xA))};static \u0275cmp=e.Xpm({type:o,selectors:[["app-ManageUsers"]],features:[e._Bn([p.xA]),e.TTD],decls:21,vars:19,consts:[["id","kt_timeline_widget_2_card",1,"card","h-xl-100"],[1,"card-header","position-relative","py-0","border-bottom-2"],[1,"card-body"],[1,"row"],[1,"col-md-8"],[3,"cols","rowsPageNumbers","pagination","scrollable","data","chooseColomns","SecondBtn","contentSecondBtn","FirstBtn","contentFirstBtn","secondButtonEvent","firstButtonEvent"],[1,"col-md-4"],[1,"col-md-12"],[1,"mb-10"],["translate","Users.UserName",1,"form-label"],["type","text","placeholder","","autocomplete","",1,"form-control",3,"ngModel","ngModelChange"],["translate","Users.Mobile",1,"form-label"],["translate","Users.Type",1,"form-label"],["styleClass","fc-primng",3,"options","ngModel","optionLabel","showClear","placeholder","ngModelChange"],[2,"display","contents"],["style","width: 60%;","class","btn btn-success mx-3","translate","SHARED.Create",3,"click",4,"ngIf"],["style","width: 60%;","class","btn btn-success mx-3","translate","SHARED.Edit",3,"click",4,"ngIf"],["translate","SHARED.Cancel",1,"btn","btn-success","mx-3",2,"width","25%",3,"click"],["translate","SHARED.Create",1,"btn","btn-success","mx-3",2,"width","60%",3,"click"],["translate","SHARED.Edit",1,"btn","btn-success","mx-3",2,"width","60%",3,"click"]],template:function(s,t){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"app-shared-datatable",5),e.NdJ("secondButtonEvent",function(r){return t.EditRow(r)})("firstButtonEvent",function(r){return t.DeleteRow(r)}),e.qZA()(),e.TgZ(6,"div",6)(7,"div",7)(8,"div",8),e._UZ(9,"label",9),e.TgZ(10,"input",10),e.NdJ("ngModelChange",function(r){return t.model.fullName=r}),e.qZA()(),e.TgZ(11,"div",8),e._UZ(12,"label",11),e.TgZ(13,"input",10),e.NdJ("ngModelChange",function(r){return t.model.phoneNumber=r}),e.qZA()(),e.TgZ(14,"div",8),e._UZ(15,"label",12),e.TgZ(16,"p-dropdown",13),e.NdJ("ngModelChange",function(r){return t.currentUserType=r}),e.qZA()(),e.TgZ(17,"div",14),e.YNc(18,B,1,0,"button",15),e.YNc(19,S,1,0,"button",16),e.TgZ(20,"button",17),e.NdJ("click",function(){return t.Clear()}),e.qZA()()()()()()()()),2&s&&(e.xp6(5),e.Q6J("cols",t.Cols)("rowsPageNumbers",25)("pagination",!0)("scrollable",!1)("data",t.Data)("chooseColomns",!0)("SecondBtn",!0)("contentSecondBtn","ar"==t.currentLanguage?"\u062a\u0639\u062f\u064a\u0644":"Edit")("FirstBtn",!0)("contentFirstBtn","ar"==t.currentLanguage?"\u062d\u0630\u0641":"Delete"),e.xp6(5),e.Q6J("ngModel",t.model.fullName),e.xp6(3),e.Q6J("ngModel",t.model.phoneNumber),e.xp6(3),e.Q6J("options",t.userTypes)("ngModel",t.currentUserType)("optionLabel","ar"==t.currentLanguage?"NameAr":"NameEn")("showClear",!1)("placeholder","ar"==t.currentLanguage?"\u0627\u062e\u062a\u0631 \u0646\u0648\u0639 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645":"Choose User Type "),e.xp6(2),e.Q6J("ngIf","add"==t.mode),e.xp6(1),e.Q6J("ngIf","edit"==t.mode))},dependencies:[v.O5,E.G,c.Fj,c.JJ,c.On,T.Lt,C.Pi]})}return o})();var J=a(5150),Z=a(3415),w=a(3660),F=a(4055),I=a(9378);let D=(()=>{class o{static \u0275fac=function(s){return new(s||o)};static \u0275mod=e.oAB({type:o});static \u0275inj=e.cJS({imports:[v.ez,J.Bz.forChild([{path:"users",component:A}]),Z.m,c.u5,T.kW,I.EV,F.q4,C.aw,w.q,p.DL]})}return o})()}}]);