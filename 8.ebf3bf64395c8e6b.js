"use strict";(self.webpackChunkdemo2=self.webpackChunkdemo2||[]).push([[8],{9008:(G,p,r)=>{r.r(p),r.d(p,{ManageUsersModule:()=>R});var m=r(6814),d=r(7860),i=r(649),u=r(1356),h=r(7434),T=r(8180),y=r(4442),I=r(3519),f=r.n(I),e=r(5879),Z=r(8472),S=r(4361),g=r(6223),C=r(2160),U=r(3506),b=r(6663),M=r(158);const N=["fileInput"];function _(o,v){if(1&o&&e._UZ(0,"p-image",41),2&o){const n=e.oxw();e.Q6J("src",n.model.profileImageUrl)("preview",!0)}}function D(o,v){if(1&o){const n=e.EpF();e.TgZ(0,"button",42),e.NdJ("click",function(){e.CHM(n);const t=e.oxw();return e.KtG(t.Add())}),e.qZA()}}function A(o,v){if(1&o){const n=e.EpF();e.TgZ(0,"button",43),e.NdJ("click",function(){e.CHM(n);const t=e.oxw();return e.KtG(t.Edit())}),e.qZA()}}let E=(()=>{class o{service;cdr;dialogService;cts;CitiesData=[];Cols;Data;SpecData;currentLanguage;lang=localStorage.getItem("language");contentFirstBtn;contentSecondBtn;classFirstBtn="success text-white";mode="add";currentSpec={id:""};userTypes=y.zI;currentUserType;IsDeletedUsersOptions;currentSelectedIsDeletedOption;currentSelectedIsUserTypeOption;constructor(n,l,t,a){this.service=n,this.cdr=l,this.dialogService=t,this.cts=a,this.lang=localStorage.getItem("language"),this.Cols=[d.v.fromJS({id:0,sorted:!0,filtered:!0,hidden:!1,field:"profileImageUrl",header:"ar"==this.lang?"\u0635\u0648\u0631\u0629":"Image ",type:"image"}),d.v.fromJS({id:1,sorted:!0,filtered:!0,hidden:!0,field:"id",header:"ar"==this.lang?"\u0627\u0644\u0643\u0648\u062f \u0627\u0644\u062a\u0639\u0631\u064a\u0641\u064a":"Id Code ",type:"text"}),d.v.fromJS({id:2,sorted:!0,filtered:!0,hidden:!1,field:"fullName",header:"ar"==this.lang?"\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645":"User Name ",type:"text"}),d.v.fromJS({id:3,sorted:!0,filtered:!0,hidden:!1,field:"phoneNumber",header:"ar"==this.lang?"\u0631\u0642\u0645 \u0627\u0644\u0645\u0648\u0628\u0627\u064a\u0644":"Phone Number ",type:"text"}),d.v.fromJS({id:4,sorted:!0,filtered:!0,hidden:!1,field:"email",header:"ar"==this.lang?"\u0627\u0644\u0628\u0631\u064a\u062f":"Email ",type:"text"}),d.v.fromJS({id:5,sorted:!0,filtered:!0,hidden:!1,field:"userType",header:"ar"==this.lang?"\u0627\u0644\u0646\u0648\u0639":"Type ",type:"userType"})],this.IsDeletedUsersOptions=[{id:1,displaynameEn:"All Without Deleted",displaynameAr:"\u0627\u0644\u0643\u0644 \u0628\u062f\u0648\u0646 \u0627\u0644\u0645\u062d\u0630\u0648\u0641",value:1},{id:2,displaynameEn:"Only Deleted Users",displaynameAr:"\u0627\u0644\u0645\u062d\u0630\u0648\u0641 \u0641\u0642\u0637",value:2}],this.contentFirstBtn="ar"===this.lang?"<i class='fas fa-trash-alt'></i> \u062d\u0630\u0641":"<i class='fas fa-trash-alt'></i> Delete",this.contentSecondBtn="ar"===this.lang?"<i class='fas fa-edit'></i> \u062a\u0639\u062f\u064a\u0644":"<i class='fas fa-edit'></i> Edit ",this.currentLanguage=localStorage.getItem("language")??"ar"}ngOnChanges(n){this.cdr.detectChanges()}ngOnInit(){this.currentLanguage=localStorage.getItem("language")??"ar",this.search(),this.searchCities()}search(){let a,s,c,n=(new h.l).GetUserId();1==this.currentSelectedIsDeletedOption?c=!1:2==this.currentSelectedIsDeletedOption&&(c=!0),a=this.currentSelectedIsUserTypeOption?.Id,s=!1,this.service.searchUsers(void 0,void 0,a,c,!1,void 0,void 0,n,void 0).pipe((0,T.q)(1)).subscribe({next:Y=>{this.Data=Y.data.items,this.cdr.detectChanges()},error:()=>{}})}searchCities(){this.service.searchCity("","",!1,1,1,void 0,void 0).subscribe({next:n=>{this.CitiesData=n.data.items,this.cdr.detectChanges()},error:()=>{}})}selectedFile=null;base64String="";onFileSelected(n){const l=n.target;if(l.files&&l.files.length>0){this.selectedFile=l.files[0];const t=new FileReader;t.onload=this.handleReaderLoaded.bind(this),t.readAsDataURL(this.selectedFile)}}handleReaderLoaded(n){if(this.base64String=n.target?.result,this.model.profileImageUrl=String(this.base64String),"edit"==this.mode){let l=new i.Xek;l.targetUserId=this.model.id,l.profileImageBase64=this.model.profileImageUrl,this.service.changeProfileImageControlPanel(l).subscribe({next:t=>{}})}this.cdr.detectChanges()}Add(){let n=new i.QV;n.userType=Number(this.currentUserType.Id),n.gender=1,n.bloodType=1,n.fullName=this.model.fullName,n.email=this.model.email,n.phoneNumber=this.model.phoneNumber,n.addressDescription=this.model.addressDescription,n.birthDate=this.model.birthDate,n.cityId=String(this.selectedCity),n.latitude=this.model.latitude,n.longitude=this.model.longitude,n.profileImageBase64=this.model.profileImageUrl,this.service.createNewUser(n).subscribe({next:l=>{this.search()}})}model=new i.NME;selectedForEdit=new i.NME;selectedCity;EditRow(n){(new h.l).GetUserId(),this.model=n,this.currentUserType=this.userTypes.filter(a=>a.Id==n.userType)[0],this.mode="edit";let t=i.NME.fromJS(n);this.model=t,this.selectedForEdit=n,null!=n.cityId&&(this.selectedCity=this.CitiesData.filter(a=>a.id==n.cityId)[0].id,this.model.cityId=this.selectedCity)}Edit(){let n=new i.O1n;n.gender=1,n.bloodType=1,n.fullName=this.model.fullName,n.email=this.model.email,n.addressDescription=this.model.addressDescription,n.birthDate=this.model.birthDate,n.cityId=String(this.selectedCity),n.latitude=this.model.latitude,n.longitude=this.model.longitude,n.profileImage=this.model.profileImageUrl,n.targetUserId=this.model.id,this.service.editUserForAdmin(n).subscribe({next:l=>{this.search(),this.cts.Show("info","ar"==this.currentLanguage?"\u062a\u0639\u062f\u064a\u0644":"Updated ","ar"==this.currentLanguage?"\u062a\u0645 \u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645 \u0628\u0646\u062c\u0627\u062d":"User Updated Successfully")}})}DeleteRow(n){f().fire({title:"ar"==this.lang?"\u0647\u0644 \u0627\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u061f":"Are You Sure ? ",text:"ar"==this.lang?" \u0639\u0645\u0644\u064a\u0629 \u0627\u0644\u062d\u0630\u0641 \u0644\u0627 \u064a\u0645\u0643\u0646 \u0627\u0644\u0631\u062c\u0648\u0639 \u0641\u064a\u0647\u0627 , \u0627\u0630\u0627 \u0643\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0627\u0636\u063a\u0637 \u0639\u0644\u064a \u062d\u0630\u0641 \u0627\u0648 \u0645\u0643\u0646\u0643 \u0627\u0644\u0631\u062c\u0648\u0639   ":"this The deletion process is irreversible. If you are sure, click Delete or you can Cancel it ",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"ar"==this.lang?"\u062d\u0630\u0641":"Delete",cancelButtonText:"ar"==this.lang?"\u0625\u0644\u063a\u0627\u0621":"Cancel"}).then(l=>{if(l.isConfirmed){let t=new i.rl5;t.targetUserId=n.id,this.service.deleteUser(t).subscribe({next:a=>{f().fire({title:"ar"==this.lang?"\u062a\u0645 \u0627\u0644\u062d\u0630\u0641":"Deleted!",text:"ar"==this.lang?"\u062a\u0645 \u0627\u0644\u062d\u0630\u0641 \u0628\u0646\u062c\u0627\u062d ":"Record has been deleted Successfully.",icon:"success"}),this.search()}})}})}Clear(){this.model=new i.NME,this.mode="add",this.currentUserType={}}fileInput;defaultImage="https://mutabbib-test.start-it-ly.com/assets/logo/png%202.png";onImageError(n){n.target.src=this.defaultImage}triggerFileInput(){this.fileInput.nativeElement.click(),this.cdr.detectChanges()}static \u0275fac=function(l){return new(l||o)(e.Y36(i.r9S),e.Y36(e.sBO),e.Y36(u.xA),e.Y36(Z.m))};static \u0275cmp=e.Xpm({type:o,selectors:[["app-ManageUsers"]],viewQuery:function(l,t){if(1&l&&e.Gf(N,5),2&l){let a;e.iGM(a=e.CRH())&&(t.fileInput=a.first)}},features:[e._Bn([u.xA]),e.TTD],decls:64,vars:47,consts:[[1,"m-3"],["translate","MENU.Users",2,"font-weight","bold","color","white"],["id","kt_timeline_widget_2_card",1,"card"],[1,"card-body"],[1,"row"],[1,"col-md-6"],["translate","Users.Type",1,"form-label"],[1,"dropdown"],["styleClass","fc-primng",3,"options","ngModel","disabled","optionLabel","showClear","placeholder","ngModelChange","onChange"],["translate","Users.DeletedOrNot",1,"form-label"],["styleClass","fc-primng",3,"options","ngModel","optionLabel","optionValue","showClear","placeholder","ngModelChange","onChange"],[1,"col-md-8"],[3,"cols","rowsPageNumbers","pagination","scrollable","data","chooseColomns","SecondBtn","FirstBtn","contentSecondBtn","contentFirstBtn","classFirstBtn","classSecondBtn","secondButtonEvent","firstButtonEvent"],[1,"col-md-4"],[1,"col-md-12"],[1,"mb-10"],["styleClass","fc-primng",3,"options","ngModel","disabled","optionLabel","showClear","placeholder","ngModelChange"],["translate","Users.UserName",1,"form-label"],["type","text","placeholder","","autocomplete","",1,"form-control",3,"ngModel","ngModelChange"],["translate","Users.Mobile",1,"form-label"],["type","text","placeholder","","autocomplete","",1,"form-control",3,"ngModel","disabled","ngModelChange"],["translate","Users.Email",1,"form-label"],["type","email","placeholder","","autocomplete","",1,"form-control",3,"ngModel","ngModelChange"],["translate","Users.AddressDescription",1,"form-label"],[1,"form-control",3,"ngModel","ngModelChange"],["translate","Users.birthDate",1,"form-label"],["styleClass","fc-primng",3,"ngModel","ngModelChange"],["translate","address.SelectState",1,"form-label"],["styleClass","fc-primng",3,"options","ngModel","optionValue","optionLabel","showClear","placeholder","ngModelChange"],["translate","Users.longitude",1,"form-label"],["translate","Users.latitude",1,"form-label"],["translate","Users.ImageProfile",1,"form-label"],[1,"custom-file-input",2,"display","flex","justify-content","space-evenly","align-content","center","align-items","flex-end"],["alt","Image","width","80",3,"src","preview",4,"ngIf"],["type","button","translate","Users.ChangeProfileImage",1,"btn","btn-success",3,"click"],["type","file",1,"form-control",3,"change"],["fileInput",""],[2,"display","contents"],["style","width: 60%;","class","btn btn-success mx-3","translate","SHARED.Create",3,"click",4,"ngIf"],["style","width: 60%;","class","btn btn-success mx-3","translate","SHARED.Edit",3,"click",4,"ngIf"],["translate","SHARED.Cancel",1,"btn","btn-bordered","btn-outline-success","mx-3",2,"width","25%",3,"click"],["alt","Image","width","80",3,"src","preview"],["translate","SHARED.Create",1,"btn","btn-success","mx-3",2,"width","60%",3,"click"],["translate","SHARED.Edit",1,"btn","btn-success","mx-3",2,"width","60%",3,"click"]],template:function(l,t){1&l&&(e.TgZ(0,"span",0),e._UZ(1,"h2",1),e.qZA(),e.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e._UZ(6,"label",6),e.TgZ(7,"div",7)(8,"p-dropdown",8),e.NdJ("ngModelChange",function(s){return t.currentSelectedIsUserTypeOption=s})("onChange",function(){return t.search()}),e.qZA()()(),e.TgZ(9,"div",5),e._UZ(10,"label",9),e.TgZ(11,"div",7)(12,"p-dropdown",10),e.NdJ("ngModelChange",function(s){return t.currentSelectedIsDeletedOption=s})("onChange",function(){return t.search()}),e.qZA()()()()()(),e._UZ(13,"br"),e.TgZ(14,"div",4)(15,"div",11)(16,"div",2)(17,"div",3)(18,"app-shared-datatable",12),e.NdJ("secondButtonEvent",function(s){return t.EditRow(s)})("firstButtonEvent",function(s){return t.DeleteRow(s)}),e.qZA()()()(),e.TgZ(19,"div",13)(20,"div",2)(21,"div",3)(22,"div",14)(23,"div",15),e._UZ(24,"label",6),e.TgZ(25,"div",7)(26,"p-dropdown",16),e.NdJ("ngModelChange",function(s){return t.currentUserType=s}),e.qZA()()(),e.TgZ(27,"div",15),e._UZ(28,"label",17),e.TgZ(29,"input",18),e.NdJ("ngModelChange",function(s){return t.model.fullName=s}),e.qZA()(),e.TgZ(30,"div",15),e._UZ(31,"label",19),e.TgZ(32,"input",20),e.NdJ("ngModelChange",function(s){return t.model.phoneNumber=s}),e.qZA()(),e.TgZ(33,"div",15),e._UZ(34,"label",21),e.TgZ(35,"input",22),e.NdJ("ngModelChange",function(s){return t.model.email=s}),e.qZA()(),e.TgZ(36,"div",15),e._UZ(37,"label",23),e.TgZ(38,"textarea",24),e.NdJ("ngModelChange",function(s){return t.model.addressDescription=s}),e.qZA()(),e.TgZ(39,"div",15),e._UZ(40,"label",25),e.TgZ(41,"div",7)(42,"p-calendar",26),e.NdJ("ngModelChange",function(s){return t.model.birthDate=s}),e.qZA()()(),e.TgZ(43,"div",15),e._UZ(44,"label",27),e.TgZ(45,"div",7)(46,"p-dropdown",28),e.NdJ("ngModelChange",function(s){return t.selectedCity=s}),e.qZA()()(),e.TgZ(47,"div",15),e._UZ(48,"label",29),e.TgZ(49,"input",18),e.NdJ("ngModelChange",function(s){return t.model.longitude=s}),e.qZA()(),e.TgZ(50,"div",15),e._UZ(51,"label",30),e.TgZ(52,"input",18),e.NdJ("ngModelChange",function(s){return t.model.latitude=s}),e.qZA()(),e.TgZ(53,"div",15),e._UZ(54,"label",31),e.TgZ(55,"div",32),e.YNc(56,_,1,2,"p-image",33),e.TgZ(57,"button",34),e.NdJ("click",function(){return t.triggerFileInput()}),e.qZA(),e.TgZ(58,"input",35,36),e.NdJ("change",function(s){return t.onFileSelected(s)}),e.qZA()()(),e.TgZ(60,"div",37),e.YNc(61,D,1,0,"button",38),e.YNc(62,A,1,0,"button",39),e.TgZ(63,"button",40),e.NdJ("click",function(){return t.Clear()}),e.qZA()()()()()()()),2&l&&(e.xp6(8),e.Q6J("options",t.userTypes)("ngModel",t.currentSelectedIsUserTypeOption)("disabled","edit"==t.mode)("optionLabel","ar"==t.currentLanguage?"NameAr":"NameEn")("showClear",!1)("placeholder","ar"==t.currentLanguage?"\u0627\u062e\u062a\u0631 \u0646\u0648\u0639 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645":"Choose User Type "),e.xp6(4),e.Q6J("options",t.IsDeletedUsersOptions)("ngModel",t.currentSelectedIsDeletedOption)("optionLabel","ar"==t.currentLanguage?"displaynameAr":"displaynameEn")("optionValue","value")("showClear",!1)("placeholder","ar"==t.currentLanguage?"\u0627\u062e\u062a\u0631 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u064a\u0646":"Choose Users"),e.xp6(6),e.Q6J("cols",t.Cols)("rowsPageNumbers",10)("pagination",!0)("scrollable",!1)("data",t.Data)("chooseColomns",!0)("SecondBtn",!0)("FirstBtn",1==t.currentSelectedIsDeletedOption)("contentSecondBtn",t.contentSecondBtn)("contentFirstBtn",t.contentFirstBtn)("classFirstBtn","light-danger")("classSecondBtn","light-warning"),e.xp6(8),e.Q6J("options",t.userTypes)("ngModel",t.currentUserType)("disabled","edit"==t.mode)("optionLabel","ar"==t.currentLanguage?"NameAr":"NameEn")("showClear",!1)("placeholder","ar"==t.currentLanguage?"\u0627\u062e\u062a\u0631 \u0646\u0648\u0639 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645":"Choose User Type "),e.xp6(3),e.Q6J("ngModel",t.model.fullName),e.xp6(3),e.Q6J("ngModel",t.model.phoneNumber)("disabled","edit"==t.mode),e.xp6(3),e.Q6J("ngModel",t.model.email),e.xp6(3),e.Q6J("ngModel",t.model.addressDescription),e.xp6(4),e.Q6J("ngModel",t.model.birthDate),e.xp6(4),e.Q6J("options",t.CitiesData)("ngModel",t.selectedCity)("optionValue","id")("optionLabel","ar"==t.currentLanguage?"city_Name_Ar":"city_Name_En")("showClear",!1)("placeholder","ar"==t.currentLanguage?"\u0627\u062e\u062a\u0631 \u0627\u0644\u0645\u0646\u0642\u0637\u0629":"Choose Area"),e.xp6(3),e.Q6J("ngModel",t.model.longitude),e.xp6(3),e.Q6J("ngModel",t.model.latitude),e.xp6(4),e.Q6J("ngIf",t.model.profileImageUrl),e.xp6(5),e.Q6J("ngIf","add"==t.mode),e.xp6(1),e.Q6J("ngIf","edit"==t.mode))},dependencies:[m.O5,S.G,g.Fj,g.JJ,g.On,C.Lt,U.f,b.Pi,M.E],styles:[".custom-file-input[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{display:none}"]})}return o})();var w=r(7304),J=r(3415),B=r(3660),F=r(4055),L=r(9378),O=r(8039),Q=r(8676);let R=(()=>{class o{static \u0275fac=function(l){return new(l||o)};static \u0275mod=e.oAB({type:o});static \u0275inj=e.cJS({imports:[m.ez,w.Bz.forChild([{path:"users",component:E,data:{animation:"users"}}]),J.m,g.u5,C.kW,L.EV,F.q4,U._8,b.aw,B.q,O.F,Q.Q,M.$,u.DL]})}return o})()}}]);